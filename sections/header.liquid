{% comment %}
  Dynamic header drawer with image and text dropdowns for Shopify Dawn theme.
  Preserves original design while making menu dynamic.
{% endcomment %}

<header-drawer data-breakpoint="{{ section.settings.menu_type_desktop | default: 'tablet' }}">
  <details id="Details-menu-drawer-container">
    <summary aria-label="{{ 'sections.header.menu' | t }}">
      <span>
        {{ 'icon-hamburger.svg' | inline_asset_content }}
        {{ 'icon-close.svg' | inline_asset_content }}
      </span>
    </summary>
    <div id="menu-drawer">
      <div>
        <nav>
          <ul role="list">
            {% for link in linklists['main-menu'].links %}
              <li>
                <a href="{{ link.url }}">{{ link.title }}</a>
                {% if link.links != blank %}
                  <div>
                    <div>
                      {% for childlink in link.links %}
                        <div>
                          <img
                            src="{{ childlink.image | default: 'https://via.placeholder.com/400' }}"
                            alt="{{ childlink.title }}"
                          >
                          <div>
                            <h3>{{ childlink.title }}</h3>
                            <a href="{{ childlink.url }}">Discover now</a>
                          </div>
                        </div>
                      {% endfor %}
                    </div>
                  </div>
                {% endif %}
              </li>
            {% endfor %}
          </ul>
        </nav>
        {% if localization.available_countries.size > 1 %}
          <localization-form>
            <form action="/localization" method="post">
              <select name="country" onchange="this.form.submit()">
                {% for country in localization.available_countries %}
                  <option
                    value="{{ country.iso_code }}"
                    {% if country.iso_code == localization.country.iso_code %}
                      selected
                    {% endif %}
                  >
                    {{ country.name }}
                  </option>
                {% endfor %}
              </select>
            </form>
          </localization-form>
        {% endif %}
      </div>
    </div>
  </details>
</header-drawer>
